<template>
       <!-- best players -->
       <div class="content" id="top-players">
            <div class="content__title">
                <h3>Best Players</h3>
            </div>
            <div class="content__body">
                <div class="item" v-for="(player, index) in players" :key="index">
                    <div class="left__block">
                        <a href="#">
                            <img class="item__img" src="https://firebasestorage.googleapis.com/v0/b/foosball-tracker-67dd0.appspot.com/o/images%2Fdefault-player.png?alt=media&token=7478e588-7159-43c2-ada5-89fb52778cc1" alt="player1-img.png"
                                loading="lazy">
                            <span class="item__title">{{ player.newPlayer.playerName }}</span>
                        </a>
                    </div>
                    <div class="right__block teams__action">
                        <div class="more-details show-hover">
                            <a href="#">
                                <span>{{ player.newPlayer.playerScore }}</span>
                                <svg width="12" height="12" viewBox="0 0 12 12" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M11.8822 5.99999C11.8822 4.81998 11.4019 3.75009 10.6265 2.97545C9.95384 2.30329 8.99035 1.72755 7.75995 1.26701C6.78348 0.901522 5.63692 0.605717 4.3521 0.387796C2.16937 0.0176015 0.313309 0.000140625 0.294817 0C0.294208 0 0.293669 0.000164062 0.293083 0.0001875C0.209458 0.000421874 0.135489 0.0601171 0.120466 0.145289C0.103638 0.24089 0.167482 0.332038 0.263083 0.348913C0.281177 0.352101 2.09378 0.678069 3.8788 1.54739C4.41784 1.80991 4.89589 2.09086 5.31294 2.38959C5.16153 2.48566 5.01592 2.59124 4.87717 2.70604C4.70132 2.68633 4.5223 2.66744 4.34003 2.64939C2.16295 2.43382 0.31277 2.42362 0.294325 2.42355H0.293575C0.196849 2.42355 0.118239 2.50176 0.117818 2.5986C0.117396 2.69568 0.195771 2.77471 0.292872 2.77511C0.311153 2.77518 2.14731 2.78538 4.30836 2.99953C4.38437 3.00705 4.45975 3.01478 4.5347 3.02263C4.37633 3.18571 4.22975 3.3621 4.09736 3.55138C4.04174 3.63093 4.06112 3.74052 4.14069 3.79616C4.22022 3.85178 4.32983 3.8324 4.38547 3.75283C4.52804 3.54897 4.68843 3.36126 4.86339 3.19075L5.03779 3.29144C5.08539 3.31893 5.11496 3.37014 5.11496 3.4251V4.47332C5.11496 4.52828 5.08539 4.57949 5.03781 4.60698L4.13003 5.13109C4.08243 5.15856 4.02329 5.15856 3.97569 5.13109L3.79968 5.02947C3.86008 4.79219 3.9429 4.56053 4.04823 4.33583C4.08944 4.24794 4.05158 4.14327 3.96367 4.10207C3.87585 4.06089 3.77111 4.09874 3.7299 4.18663C3.48773 4.70331 3.35423 5.25343 3.33147 5.82418H0.293575C0.196474 5.82418 0.117794 5.90286 0.117794 5.99996C0.117794 6.09707 0.196474 6.17575 0.293575 6.17575H3.33142C3.37558 7.2624 3.82696 8.24579 4.53688 8.97713C4.46122 8.98505 4.38508 8.99283 4.30834 9.00045C2.14729 9.21462 0.31113 9.22479 0.292849 9.22486C0.195747 9.22529 0.117396 9.30432 0.117794 9.40137C0.118216 9.49821 0.196825 9.57643 0.293552 9.57643H0.294302C0.312747 9.57635 2.16295 9.56616 4.34 9.35058C4.52293 9.33247 4.70254 9.3135 4.879 9.2937C5.01676 9.40791 5.16182 9.51361 5.31329 9.61011C4.89618 9.90896 4.418 10.19 3.8788 10.4526C2.09381 11.3219 0.2812 11.6479 0.263083 11.651C0.167482 11.6679 0.103638 11.759 0.120466 11.8547C0.135489 11.94 0.209646 12 0.293364 12C0.293528 12 0.293716 12 0.293903 12H0.294841C0.313333 11.9998 2.16937 11.9824 4.3521 11.6122C5.63692 11.3942 6.78348 11.0984 7.75995 10.7329C8.99121 10.2721 9.95522 9.69586 10.628 9.02309C10.6281 9.02302 10.6281 9.02295 10.6282 9.02288C11.4026 8.24841 11.8822 7.17917 11.8822 5.99999ZM6.54275 6.17577H7.42522C7.41226 6.47349 7.36606 6.7626 7.28698 7.04288L6.61993 6.65776C6.57233 6.63027 6.54275 6.57906 6.54275 6.5241V6.17577ZM6.61991 5.34224L7.28698 4.95711C7.36606 5.2374 7.41223 5.52648 7.42522 5.82421H6.54275V5.4759C6.54275 5.42094 6.57233 5.36971 6.61991 5.34224ZM10.0948 3.42513C10.0948 3.37014 10.1244 3.31895 10.172 3.29146L10.3449 3.1916C10.8535 3.68788 11.2283 4.32053 11.4093 5.02996L11.2341 5.13111C11.1865 5.15858 11.1274 5.15858 11.0798 5.13111L10.172 4.60701C10.1244 4.57951 10.0948 4.52833 10.0948 4.47334V3.42513ZM6.54275 2.2211C6.88463 2.12482 7.24163 2.07421 7.60487 2.07421C7.97279 2.07421 8.32901 2.12521 8.66696 2.2203V2.42254C8.66696 2.4775 8.63738 2.52871 8.5898 2.55621L7.68205 3.08029C7.6344 3.10781 7.57524 3.10778 7.52769 3.08031L6.61993 2.55621C6.57233 2.52871 6.54275 2.4775 6.54275 2.42254V2.2211ZM6.44413 2.86068L7.35191 3.38479C7.42993 3.42984 7.51737 3.45236 7.60484 3.45234C7.69229 3.45234 7.77978 3.42981 7.8578 3.38479L8.76561 2.86068C8.92161 2.77056 9.01852 2.60268 9.01852 2.42257V2.33767C9.40078 2.48573 9.7542 2.692 10.068 2.94555L9.99617 2.98701C9.84014 3.0771 9.74323 3.24499 9.74323 3.42513V4.47334C9.74323 4.65351 9.84014 4.82139 9.99617 4.91146L10.9039 5.43557C10.9819 5.48061 11.0694 5.50314 11.1569 5.50314C11.2443 5.50314 11.3318 5.48061 11.4098 5.43557L11.4836 5.39293C11.5057 5.53436 11.52 5.67826 11.5265 5.82421H9.01854V5.4759C9.01854 5.29576 8.92163 5.12788 8.76561 5.03779L7.85783 4.5137C7.7442 4.4481 7.61054 4.4305 7.48601 4.46045C7.28759 3.96545 6.98949 3.4967 6.59293 3.05772C6.40105 2.84533 6.18606 2.63988 5.94878 2.44181C6.02839 2.40473 6.1092 2.37021 6.19119 2.33852V2.42259C6.19119 2.60268 6.2881 2.77056 6.44413 2.86068ZM8.66698 6.17577V6.5241C8.66698 6.57906 8.6374 6.63027 8.58982 6.65776L7.68205 7.18184C7.65809 7.1957 7.63121 7.20252 7.60435 7.20242C7.7049 6.87078 7.76255 6.52824 7.7769 6.17575H8.66698V6.17577ZM7.77687 5.82421C7.76253 5.47173 7.70487 5.12919 7.60435 4.79755C7.63121 4.79746 7.65807 4.8043 7.68202 4.81813L8.58978 5.34222C8.63738 5.36971 8.66696 5.42092 8.66696 5.47588V5.82421H7.77687ZM7.48601 7.53957C7.52504 7.54897 7.56493 7.55389 7.60487 7.55389C7.69233 7.55389 7.77983 7.53137 7.85783 7.48632L8.76563 6.96224C8.92163 6.87212 9.01854 6.70424 9.01854 6.52412V6.17577H11.5265C11.5201 6.32171 11.5057 6.46564 11.4837 6.60706L11.4099 6.56443C11.2539 6.47434 11.06 6.47434 10.904 6.56443L9.99621 7.08854C9.84019 7.17863 9.74328 7.34652 9.74328 7.52666V8.57487C9.74328 8.75504 9.84019 8.92292 9.99621 9.01299L10.068 9.05445C9.75422 9.30797 9.40081 9.51425 9.01857 9.6623V9.57743C9.01857 9.39729 8.92165 9.22941 8.76563 9.13932L7.85783 8.61519C7.70185 8.52514 7.50798 8.52509 7.35195 8.61521L6.44415 9.13932C6.28815 9.22943 6.19124 9.39732 6.19124 9.57743V9.66228C6.1089 9.63038 6.02792 9.59574 5.94835 9.55857C6.18582 9.36038 6.40098 9.15479 6.59295 8.94226C6.98949 8.50332 7.28759 8.03455 7.48601 7.53957ZM10.3449 8.8084L10.172 8.70856C10.1244 8.68107 10.0948 8.62988 10.0948 8.5749V7.52668C10.0948 7.4717 10.1244 7.42051 10.172 7.39302L11.0798 6.86891C11.1274 6.84144 11.1865 6.84144 11.2341 6.86891L11.4093 6.97006C11.2283 7.67947 10.8535 8.31214 10.3449 8.8084ZM6.54275 9.57746C6.54275 9.5225 6.57233 9.47128 6.61991 9.44379L7.52769 8.91968C7.57529 8.89222 7.63442 8.89222 7.68202 8.91968L8.58978 9.44379C8.63738 9.47128 8.66696 9.5225 8.66696 9.57746V9.77968C8.32901 9.87476 7.97279 9.92576 7.60487 9.92576C7.23692 9.92576 6.8807 9.87476 6.54275 9.77968V9.57746ZM4.02611 1.22808C3.33759 0.893272 2.65354 0.638788 2.06411 0.450843C2.7063 0.507327 3.47619 0.595827 4.29329 0.734389C5.72392 0.977014 6.96859 1.31655 7.99829 1.74089C7.86868 1.729 7.73752 1.72263 7.60489 1.72263C6.91292 1.72263 6.24179 1.89091 5.64322 2.19998C5.17632 1.84959 4.63588 1.52458 4.02611 1.22808ZM3.72571 5.39275L3.79989 5.43559C3.87789 5.48061 3.96536 5.50311 4.05283 5.50311C4.14027 5.50311 4.22776 5.48061 4.30576 5.43557L5.21357 4.91146C5.36957 4.82134 5.46648 4.65346 5.46648 4.47334V3.42513C5.46648 3.24499 5.36957 3.0771 5.21354 2.98701L5.14075 2.94499C5.29082 2.8241 5.44918 2.7146 5.6146 2.61731C6.36842 3.21754 6.88899 3.88527 7.17322 4.61687L6.44413 5.03779H6.4441C6.2881 5.1279 6.19119 5.29579 6.19119 5.4759V5.82421H3.68324C3.68957 5.67882 3.70373 5.53492 3.72571 5.39275ZM5.11494 8.57487C5.11494 8.62983 5.08536 8.68104 5.03779 8.70854L4.86482 8.80838C4.35627 8.31209 3.98148 7.67945 3.80047 6.97002L3.97562 6.86888C4.02327 6.84137 4.08243 6.84139 4.12998 6.86886L5.03774 7.39297C5.08534 7.42046 5.11492 7.47167 5.11492 7.52663V8.57487H5.11494ZM5.14175 9.05445L5.21357 9.01299C5.36957 8.92287 5.46648 8.75499 5.46648 8.57487V7.52666C5.46648 7.34652 5.36957 7.17863 5.21354 7.08854L4.30576 6.56443C4.14976 6.47434 3.95591 6.47432 3.79987 6.56443L3.72606 6.60704C3.70401 6.46562 3.68969 6.32171 3.68322 6.17577H6.19119V6.5241C6.19119 6.70424 6.2881 6.87212 6.44413 6.96221L7.17319 7.38313C6.88899 8.11468 6.36845 8.78239 5.6147 9.3826C5.44888 9.28468 5.29084 9.17492 5.14175 9.05445ZM4.29838 11.2647C3.4798 11.4037 2.70801 11.4924 2.06435 11.549C2.65373 11.3611 3.33766 11.1067 4.02611 10.7719C4.63581 10.4754 5.17621 10.1505 5.64306 9.80009C6.23103 10.1049 6.89818 10.2773 7.60491 10.2773C7.73755 10.2773 7.8687 10.2709 7.99831 10.259C6.96978 10.6829 5.72682 11.0221 4.29838 11.2647Z"
                                        fill="#2DCC70" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</template>

<script>
import { db } from "~/plugins/firebase.js";
import { collection, getDocs, doc, addDoc, writeBatch } from "firebase/firestore";

export default {
    data() {
        return {
            players: [],
        };
    },
    async created() {
       const playersRef = collection(db, "players");
       const playersSnapshot = await getDocs(playersRef);
       const playersDb = playersSnapshot.docs.map(doc => doc.data());

       // sort players by score
       playersDb.sort(function (a, b) {
                a = a.newPlayer.playerScore;
                b = b.newPlayer.playerScore;
                return a > b ? -1 : a < b ? 1 : 0;
            })

         this.players = playersDb.slice(0, 5);
         console.log(this.teams);

    },
}
</script>